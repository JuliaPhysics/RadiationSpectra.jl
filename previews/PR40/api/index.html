<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>API · RadiationSpectra.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link rel="canonical" href="https://JuliaPhysics.github.io/RadiationSpectra.jl/stable/api/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">RadiationSpectra.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><span class="tocitem">Manual</span><ul><li><a class="tocitem" href="../man/spectrum_deconvolution/">Peak Finding</a></li><li><a class="tocitem" href="../man/fitting/">Fitting</a></li><li><a class="tocitem" href="../man/spectrum_calibration/">Calibration</a></li></ul></li><li class="is-active"><a class="tocitem" href>API</a><ul class="internal"><li><a class="tocitem" href="#Types"><span>Types</span></a></li><li><a class="tocitem" href="#Functions"><span>Functions</span></a></li><li class="toplevel"><a class="tocitem" href="#Documentation"><span>Documentation</span></a></li></ul></li><li><a class="tocitem" href="../LICENSE/">LICENSE</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>API</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>API</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaPhysics/RadiationSpectra.jl/blob/master/docs/src/api.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="API"><a class="docs-heading-anchor" href="#API">API</a><a id="API-1"></a><a class="docs-heading-anchor-permalink" href="#API" title="Permalink"></a></h1><h2 id="Types"><a class="docs-heading-anchor" href="#Types">Types</a><a id="Types-1"></a><a class="docs-heading-anchor-permalink" href="#Types" title="Permalink"></a></h2><ul></ul><h2 id="Functions"><a class="docs-heading-anchor" href="#Functions">Functions</a><a id="Functions-1"></a><a class="docs-heading-anchor-permalink" href="#Functions" title="Permalink"></a></h2><ul><li><a href="#RadiationSpectra.calibrate_spectrum-Tuple{StatsBase.Histogram{&lt;:Real, 1}, Vector{&lt;:Real}}"><code>RadiationSpectra.calibrate_spectrum</code></a></li><li><a href="#RadiationSpectra.get_example_spectrum-Tuple{}"><code>RadiationSpectra.get_example_spectrum</code></a></li><li><a href="#RadiationSpectra.opt_fit"><code>RadiationSpectra.opt_fit</code></a></li><li><a href="#RadiationSpectra.opt_fit"><code>RadiationSpectra.opt_fit</code></a></li><li><a href="#RadiationSpectra.peakfinder-Tuple{StatsBase.Histogram}"><code>RadiationSpectra.peakfinder</code></a></li></ul><h1 id="Documentation"><a class="docs-heading-anchor" href="#Documentation">Documentation</a><a id="Documentation-1"></a><a class="docs-heading-anchor-permalink" href="#Documentation" title="Permalink"></a></h1><article class="docstring"><header><a class="docstring-binding" id="RadiationSpectra.calibrate_spectrum-Tuple{StatsBase.Histogram{&lt;:Real, 1}, Vector{&lt;:Real}}" href="#RadiationSpectra.calibrate_spectrum-Tuple{StatsBase.Histogram{&lt;:Real, 1}, Vector{&lt;:Real}}"><code>RadiationSpectra.calibrate_spectrum</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">calibrate_spectrum(h_uncal::Histogram, photon_lines::Array{Real, 1}; &lt;keyword arguments&gt;)</code></pre><p>Returns the calibrated histogram, the deconvoluted spectrum, the found (uncalibrated) peak positions and the final <code>threshold</code> value.</p><p><strong>Keywords</strong></p><ul><li><code>σ::Real = 2.0</code>: The expected sigma of a peak in the spectrum. In units of bins.</li><li><code>threshold::Real = 10.0</code>: Threshold for being identified as a peak in the deconvoluted spectrum. A single bin is identified as a peak when its weight exceeds the <code>threshold</code> and the previous bin was not identified as an peak.</li><li><code>min_n_peaks::Int = 0</code>: If the number of found peaks is smaller than <code>min_n_peaks</code> the functions lowers the parameter <code>threshold</code> until enough peaks are found.</li><li><code>max_n_peaks::Int = 50</code>: Use only the first (strongest) <code>max_n_peaks</code> peaks for peak identification.</li><li><code>α::Real = 0.005</code>:  = 0.5%. Acceptance level in the comparison of the peak position ratios in the peak indentification step. When the difference between the ratio of two found peak positions and the ratio of two photon lines (<code>photon_lines</code>) is smaller than <code>α</code>, the found peaks are identified as the two photon lines.</li><li><code>rtol::Real = 5e-3</code>:  = 5e-3. Acceptance level for tolerance of the absolute difference between true and found line position.</li></ul><p>Calibrate the spectrum <code>h_uncal</code>. This is done by:</p><ol><li>finding peaks through devoncolution</li><li>identifying them through comparison of the ratios of their positions with the ratios of the known <code>lines</code></li><li>fitting all identified peaks (with a gaussian plus first order polynomial) to get their position more precisely</li><li>performe a linear fit (offset forced to 0) of these positions vs the true positions (<code>lines</code>) to get the calibration constant</li></ol></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaPhysics/RadiationSpectra.jl/blob/a81804c5e8daa497e7c4916c4fc26795ca5a769a/src/AutoCalibration/AutoCalibration.jl#L151-L169">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="RadiationSpectra.get_example_spectrum-Tuple{}" href="#RadiationSpectra.get_example_spectrum-Tuple{}"><code>RadiationSpectra.get_example_spectrum</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">get_example_spectrum()::Histogram</code></pre><p>Returns an uncalibrated radiation spectrum for testing and demonstrating purpose.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaPhysics/RadiationSpectra.jl/blob/a81804c5e8daa497e7c4916c4fc26795ca5a769a/src/RadiationSpectra.jl#L28-L32">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="RadiationSpectra.opt_fit" href="#RadiationSpectra.opt_fit"><code>RadiationSpectra.opt_fit</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs"># opt_fit(DT::Type{&lt;:UvSpectrumDensity}, h::Histogram{&lt;:Any, 1},
         p0::AbstractVector, lower_bounds::AbstractVector, upper_bounds::AbstractVector)</code></pre><p>Maximum Likelihood Estimation Fit of model density <code>d</code> on the histogram <code>h</code>.     </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaPhysics/RadiationSpectra.jl/blob/a81804c5e8daa497e7c4916c4fc26795ca5a769a/src/UnivariateFit.jl#L43-L48">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="RadiationSpectra.opt_fit" href="#RadiationSpectra.opt_fit"><code>RadiationSpectra.opt_fit</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs"># opt_fit(DT::Type{&lt;:UvSpectrumDensity}, h::Histogram{&lt;:Any, 1},
         p0::NamedTuple, lower_bounds::NamedTuple, upper_bounds::NamedTuple)</code></pre><p>Maximum Likelihood Estimation Fit of model density <code>d</code> on the histogram <code>h</code>.     </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaPhysics/RadiationSpectra.jl/blob/a81804c5e8daa497e7c4916c4fc26795ca5a769a/src/UnivariateFit.jl#L65-L70">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="RadiationSpectra.peakfinder-Tuple{StatsBase.Histogram}" href="#RadiationSpectra.peakfinder-Tuple{StatsBase.Histogram}"><code>RadiationSpectra.peakfinder</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">peakfinder(h::Histogram; &lt;keyword arguments&gt;)::Tuple{Histogram, Array{Float64, 1}}</code></pre><p>Returns a deconvoluted spectrum and an array of peak positions.</p><p><strong>Keywords</strong></p><ul><li><code>σ::Real=2.0</code>: The expected sigma of a peak in the spectrum. In units of bins. </li><li><code>threshold::Real=10.0</code>: Threshold for being identified as a peak in the deconvoluted spectrum. A single bin is identified as a peak when its weight exceeds the <code>threshold</code> and the previous bin was not identified as an peak.</li><li><code>backgroundRemove::Bool=true</code></li><li><code>deconIterations::Int=3</code></li><li><code>markov::Bool=true</code></li><li><code>averWindow::Int=3</code></li></ul><p><strong>Source</strong></p><p>This function is basically a copy of <code>TSpectrum::SearchHighRes</code> from <a href="https://root.cern.ch/doc/master/classTSpectrum.html">ROOT</a>.</p><ul><li>M.A. Mariscotti: A method for identification of peaks in the presence of background and its application to spectrum analysis. NIM 50 (1967), 309-320.</li><li>M. Morhac;, J. Kliman, V. Matouoek, M. Veselsky, I. Turzo.:Identification of peaks in multidimensional coincidence gamma-ray spectra. NIM, A443 (2000) 108-125.</li><li>Z.K. Silagadze, A new algorithm for automatic photopeak searches. NIM A 376 (1996), 451.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaPhysics/RadiationSpectra.jl/blob/a81804c5e8daa497e7c4916c4fc26795ca5a769a/src/PeakFinder/PeakFinder.jl#L371-L390">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../man/spectrum_calibration/">« Calibration</a><a class="docs-footer-nextpage" href="../LICENSE/">LICENSE »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.14 on <span class="colophon-date" title="Tuesday 15 March 2022 00:58">Tuesday 15 March 2022</span>. Using Julia version 1.7.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
