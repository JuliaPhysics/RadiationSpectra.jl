<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>API · RadiationSpectra.jl</title><meta name="title" content="API · RadiationSpectra.jl"/><meta property="og:title" content="API · RadiationSpectra.jl"/><meta property="twitter:title" content="API · RadiationSpectra.jl"/><meta name="description" content="Documentation for RadiationSpectra.jl."/><meta property="og:description" content="Documentation for RadiationSpectra.jl."/><meta property="twitter:description" content="Documentation for RadiationSpectra.jl."/><meta property="og:url" content="https://JuliaPhysics.github.io/RadiationSpectra.jl/stable/api/"/><meta property="twitter:url" content="https://JuliaPhysics.github.io/RadiationSpectra.jl/stable/api/"/><link rel="canonical" href="https://JuliaPhysics.github.io/RadiationSpectra.jl/stable/api/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">RadiationSpectra.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><span class="tocitem">Manual</span><ul><li><a class="tocitem" href="../man/spectrum_deconvolution/">Peak Finding</a></li><li><a class="tocitem" href="../man/fitting/">Fitting</a></li><li><a class="tocitem" href="../man/spectrum_calibration/">Calibration</a></li></ul></li><li class="is-active"><a class="tocitem" href>API</a><ul class="internal"><li><a class="tocitem" href="#Types"><span>Types</span></a></li><li><a class="tocitem" href="#Functions"><span>Functions</span></a></li><li class="toplevel"><a class="tocitem" href="#Documentation"><span>Documentation</span></a></li></ul></li><li><a class="tocitem" href="../LICENSE/">LICENSE</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>API</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>API</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/JuliaPhysics/RadiationSpectra.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/JuliaPhysics/RadiationSpectra.jl/blob/main/docs/src/api.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="API"><a class="docs-heading-anchor" href="#API">API</a><a id="API-1"></a><a class="docs-heading-anchor-permalink" href="#API" title="Permalink"></a></h1><h2 id="Types"><a class="docs-heading-anchor" href="#Types">Types</a><a id="Types-1"></a><a class="docs-heading-anchor-permalink" href="#Types" title="Permalink"></a></h2><ul></ul><h2 id="Functions"><a class="docs-heading-anchor" href="#Functions">Functions</a><a id="Functions-1"></a><a class="docs-heading-anchor-permalink" href="#Functions" title="Permalink"></a></h2><ul><li><a href="#RadiationSpectra._interpolate_linear-Tuple{Tuple{Real, Real}, Tuple{Real, Real}}"><code>RadiationSpectra._interpolate_linear</code></a></li><li><a href="#RadiationSpectra.calibrate_spectrum-Tuple{StatsBase.Histogram{&lt;:Real, 1}, Vector{&lt;:Real}}"><code>RadiationSpectra.calibrate_spectrum</code></a></li><li><a href="#RadiationSpectra.get_example_spectrum-Tuple{}"><code>RadiationSpectra.get_example_spectrum</code></a></li><li><a href="#RadiationSpectra.opt_fit"><code>RadiationSpectra.opt_fit</code></a></li><li><a href="#RadiationSpectra.opt_fit"><code>RadiationSpectra.opt_fit</code></a></li><li><a href="#RadiationSpectra.peakfinder-Tuple{StatsBase.Histogram}"><code>RadiationSpectra.peakfinder</code></a></li></ul><h1 id="Documentation"><a class="docs-heading-anchor" href="#Documentation">Documentation</a><a id="Documentation-1"></a><a class="docs-heading-anchor-permalink" href="#Documentation" title="Permalink"></a></h1><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="RadiationSpectra._interpolate_linear-Tuple{Tuple{Real, Real}, Tuple{Real, Real}}" href="#RadiationSpectra._interpolate_linear-Tuple{Tuple{Real, Real}, Tuple{Real, Real}}"><code>RadiationSpectra._interpolate_linear</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">_interpolate_linear(point1::Tuple{Real, Real}, point2::Tuple{Real, Real}; threshold::Real = 0.5)</code></pre><p>Interpolate a point between two points <code>point1</code> and <code>point2</code> using a linear interpolation.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaPhysics/RadiationSpectra.jl/blob/f1ea9f8c18a67e2e5edb51544ccfca3f05401e15/src/general_tools.jl#L33-L37">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="RadiationSpectra.calibrate_spectrum-Tuple{StatsBase.Histogram{&lt;:Real, 1}, Vector{&lt;:Real}}" href="#RadiationSpectra.calibrate_spectrum-Tuple{StatsBase.Histogram{&lt;:Real, 1}, Vector{&lt;:Real}}"><code>RadiationSpectra.calibrate_spectrum</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">calibrate_spectrum(h_uncal::Histogram, photon_lines::Array{Real, 1}; &lt;keyword arguments&gt;)</code></pre><p>Returns the calibrated histogram, the deconvoluted spectrum, the found (uncalibrated) peak positions and the final <code>threshold</code> value.</p><p><strong>Keywords</strong></p><ul><li><code>σ::Real = 2.0</code>: The expected sigma of a peak in the spectrum. In units of bins.</li><li><code>threshold::Real = 10.0</code>: Threshold for being identified as a peak in the deconvoluted spectrum. A single bin is identified as a peak when its weight exceeds the <code>threshold</code> and the previous bin was not identified as an peak.</li><li><code>min_n_peaks::Int = 0</code>: If the number of found peaks is smaller than <code>min_n_peaks</code> the functions lowers the parameter <code>threshold</code> until enough peaks are found.</li><li><code>max_n_peaks::Int = 50</code>: Use only the first (strongest) <code>max_n_peaks</code> peaks for peak identification.</li><li><code>α::Real = 0.005</code>:  = 0.5%. Acceptance level in the comparison of the peak position ratios in the peak indentification step. When the difference between the ratio of two found peak positions and the ratio of two photon lines (<code>photon_lines</code>) is smaller than <code>α</code>, the found peaks are identified as the two photon lines.</li><li><code>rtol::Real = 5e-3</code>:  = 5e-3. Acceptance level for tolerance of the absolute difference between true and found line position.</li></ul><p>Calibrate the spectrum <code>h_uncal</code>. This is done by:</p><ol><li>finding peaks through devoncolution</li><li>identifying them through comparison of the ratios of their positions with the ratios of the known <code>lines</code></li><li>fitting all identified peaks (with a gaussian plus first order polynomial) to get their position more precisely</li><li>performe a linear fit (offset forced to 0) of these positions vs the true positions (<code>lines</code>) to get the calibration constant</li></ol></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaPhysics/RadiationSpectra.jl/blob/f1ea9f8c18a67e2e5edb51544ccfca3f05401e15/src/AutoCalibration/AutoCalibration.jl#L178-L196">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="RadiationSpectra.get_example_spectrum-Tuple{}" href="#RadiationSpectra.get_example_spectrum-Tuple{}"><code>RadiationSpectra.get_example_spectrum</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">get_example_spectrum()::Histogram</code></pre><p>Returns an uncalibrated radiation spectrum for testing and demonstrating purpose.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaPhysics/RadiationSpectra.jl/blob/f1ea9f8c18a67e2e5edb51544ccfca3f05401e15/src/RadiationSpectra.jl#L28-L32">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="RadiationSpectra.opt_fit" href="#RadiationSpectra.opt_fit"><code>RadiationSpectra.opt_fit</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs"># opt_fit(DT::Type{&lt;:UvSpectrumDensity}, h::Histogram{&lt;:Any, 1},
         p0::NamedTuple, lower_bounds::NamedTuple, upper_bounds::NamedTuple)</code></pre><p>Maximum Likelihood Estimation Fit of model density <code>d</code> on the histogram <code>h</code>.     </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaPhysics/RadiationSpectra.jl/blob/f1ea9f8c18a67e2e5edb51544ccfca3f05401e15/src/UnivariateFit.jl#L70-L75">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="RadiationSpectra.opt_fit" href="#RadiationSpectra.opt_fit"><code>RadiationSpectra.opt_fit</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs"># opt_fit(DT::Type{&lt;:UvSpectrumDensity}, h::Histogram{&lt;:Any, 1},
         p0::AbstractVector, lower_bounds::AbstractVector, upper_bounds::AbstractVector)</code></pre><p>Maximum Likelihood Estimation Fit of model density <code>d</code> on the histogram <code>h</code>.     </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaPhysics/RadiationSpectra.jl/blob/f1ea9f8c18a67e2e5edb51544ccfca3f05401e15/src/UnivariateFit.jl#L48-L53">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="RadiationSpectra.peakfinder-Tuple{StatsBase.Histogram}" href="#RadiationSpectra.peakfinder-Tuple{StatsBase.Histogram}"><code>RadiationSpectra.peakfinder</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">peakfinder(h::Histogram; &lt;keyword arguments&gt;)::Tuple{Histogram, Array{Float64, 1}}</code></pre><p>Returns a deconvoluted spectrum and an array of peak positions.</p><p><strong>Keywords</strong></p><ul><li><code>σ::Real=2.0</code>: The expected sigma of a peak in the spectrum. In units of bins. </li><li><code>threshold::Real=10.0</code>: Threshold for being identified as a peak in the deconvoluted spectrum. A single bin is identified as a peak when its weight exceeds the <code>threshold</code> and the previous bin was not identified as an peak.</li><li><code>backgroundRemove::Bool=true</code></li><li><code>deconIterations::Int=3</code></li><li><code>markov::Bool=true</code></li><li><code>averWindow::Int=3</code></li></ul><p><strong>Source</strong></p><p>This function is basically a copy of <code>TSpectrum::SearchHighRes</code> from <a href="https://root.cern.ch/doc/master/classTSpectrum.html">ROOT</a>.</p><ul><li>M.A. Mariscotti: A method for identification of peaks in the presence of background and its application to spectrum analysis. NIM 50 (1967), 309-320.</li><li>M. Morhac;, J. Kliman, V. Matouoek, M. Veselsky, I. Turzo.:Identification of peaks in multidimensional coincidence gamma-ray spectra. NIM, A443 (2000) 108-125.</li><li>Z.K. Silagadze, A new algorithm for automatic photopeak searches. NIM A 376 (1996), 451.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaPhysics/RadiationSpectra.jl/blob/f1ea9f8c18a67e2e5edb51544ccfca3f05401e15/src/PeakFinder/PeakFinder.jl#L371-L390">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../man/spectrum_calibration/">« Calibration</a><a class="docs-footer-nextpage" href="../LICENSE/">LICENSE »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.5.0 on <span class="colophon-date" title="Friday 16 August 2024 10:40">Friday 16 August 2024</span>. Using Julia version 1.10.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
